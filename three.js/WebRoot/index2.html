<html>
	<head>
		<title>cube</title>
		<style>
			body { margin: 0; }
			canvas { width: 100%; height: 100% }
		</style>
	</head>
	<body>
		<script src="three.js"></script>
		<script>

            // 设置场景
            var scene = new THREE.Scene();
            // 创建正交投影照相机
            var camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
            camera.position.set(0, -5, 2);
            camera.lookAt(scene.position);
            // 定义着色器
            var renderer = new THREE.WebGLRenderer();
            renderer.setSize(window.innerWidth, window.innerHeight);
            document.body.appendChild(renderer.domElement);
            render.shadowMapEnabled=true;
            // 添加地板
            function initFloor() {
                var floorGeo = new THREE.PlaneBufferGeometry(12, 8, 1, 1);
                var floorMaterial = new THREE.MeshBasicMaterial({ color: '#aaaaaa' });
                var floor = new THREE.Mesh(floorGeo, floorMaterial);
                floor.position.set(0, 0, -1);
                scene.add(floor);
            }
            initFloor();
            // 添加物体
            function initCube(imageUrl) {
                var geometry = new THREE.BoxGeometry(1, 1, 1);
                var material;
                if (imageUrl) {
                    material = new THREE.MeshLambertMaterial({
                        map: THREE.ImageUtils.loadTexture(imageUrl)
                    });
                } else {
                    material = new THREE.MeshLambertMaterial();
                }
                var cube = new THREE.Mesh(geometry, material);
                scene.add(cube);
                return cube;
            }
            // 添加物体
            var cube1 = initCube('./textures/water.jpg');
            var cube2 = initCube('./textures/water.jpg');
            var cube3 = initCube();
            var cube4 = initCube();
            cube1.position.set(2, 0, 0);
            cube2.position.set(-2, 0, 0);
            cube3.position.set(0, -2, 1);
            cube4.position.set(1, 1, 3);
            // 让世界动起来
            function render() {
                requestAnimationFrame(render);
                // 此处可添加动画处理
                cube1.rotation.x += 0.03;
                cube1.rotation.y += 0.03;
                cube2.rotation.x += 0.02;
                cube3.rotation.y += 0.01;
                cube4.rotation.x -= 0.04;
                renderer.render(scene, camera);
            };

           // var ambiColor = "#0c0c0c";
           // var ambientLight = new THREE.AmbientLight(ambiColor,2);
           // scene.add(ambientLight);

			// var pointColor ="#ccffcc";
			// var pointLight = new THREE.PointLight(pointColor);
			// pointLight.distance = 100;
			// scene.add(pointLight);

            var pointColor = "#86ff0b";
            var directionalLight = new THREE.DirectionalLight(pointColor);
            directionalLight.position.set(-40, 60, -10);
            directionalLight.castShadow = true;
            directionalLight.shadowCameraNear = 2;
            directionalLight.shadowCameraFar = 200;
            directionalLight.shadowCameraLeft = -50;
            directionalLight.shadowCameraRight = 50;
            directionalLight.shadowCameraTop = 50;
            directionalLight.shadowCameraBottom = -50;

            directionalLight.distance = 0;
            directionalLight.intensity = 0.5;
            directionalLight.shadowMapHeight = 1024;
            directionalLight.shadowMapWidth = 1024;


            scene.add(directionalLight);
            render();

		</script>
	</body>
</html>